<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Dotnet project scaffolding in turmoil
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <meta name="description" content="The Blog about all things CSB" />
    <meta name="author" content="Kevin Schneider, Heinrich Lukas Weil" />

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
    </style>
    <!-- CSS -->
    <link type="text/css" rel="stylesheet" href="/CSBlog/styles/poole.css" />
    <link type="text/css" rel="stylesheet" href="/CSBlog/styles/lanyon.css" />
    <link type="text/css" rel="stylesheet" href="/CSBlog/styles/snippets.css" />
    <script type="text/javascript" src="/CSBlog/content/tips.js"></script>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
</head>
  <body>
      <!-- SIDEBAR -->
      <!--Target for toggling the sidebar `.sidebar-checkbox` is for regular
    styles, `#sidebar-checkbox` for behavior. -->
      <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
      <!-- Toggleable sidebar -->
      <div class="sidebar" id="sidebar">
          <div class="sidebar-item">
              <p>The official Blog of the Computational Systems Biology workgroup of the TU Kaiserslautern</p>
          </div>
          <nav class="sidebar-nav">
              <a class="sidebar-nav-item" href="/CSBlog/index.html">Home</a>
              <a class="sidebar-nav-item-inv">Empty</a>
              <a class="sidebar-nav-item" href="/CSBlog/blog.html">Blog Posts</a>
              <a class="sidebar-nav-item" href="/CSBlog/internal.html">Internal Posts</a>
              <a class="sidebar-nav-item" href="/CSBlog/documentation.html">Intro to Documentation</a>
              <a class="sidebar-nav-item" href="/CSBlog/CSBarReports.html">CSBar statistical analyses</a>
              <a class="sidebar-nav-item-inv">Empty</a>
              <a class="sidebar-nav-item" href="https://github.com/CSBiology">CSB on GitHub</a>
              <a class="sidebar-nav-item" href="http://csb.bio.uni-kl.de/">Official Site</a>
              <a class="sidebar-nav-item" href="/CSBlog/about.html">About</a>
              <span class="sidebar-nav-item">Currently v0.1</span>
          </nav>
          <div class="sidebar-item">
              <p>
                  &copy; hello
              </p>
          </div>
      </div>


      <!-- CONTENT-->

      <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
    content to avoid any CSS collisions with our real content. -->
      <div class="wrap">
          <div class="masthead">
              <div class="container">
                  <h3 class="masthead-title">
                      <a href="index.html" title="Home">CSBlog</a>
                      <small>Computational Systems Biology Blog</small>
                  </h3>
              </div>
          </div>
          <div class="container content">
              <h1><a name="Dotnet-project-scaffolding-in-turmoil" class="anchor" href="#Dotnet-project-scaffolding-in-turmoil">Dotnet project scaffolding in turmoil</a></h1>
<p><em>or how I updated our buildchains with alot of trial and error</em></p>
<p><em>Kevin Schneider, 4/15/2020</em></p>
<p>It all started with young and naive me browsing FsProjects libraries like we all sometimes do, and <em><em>BAM</em></em>, there it was in all of its glory:</p>
<p><img src="img/revelation.png" alt="revelation" /></p>
<p>No big announcements on  FSharp.Formatting, no big update to project scaffold, just this commit using a preview version of FSharp.Formatting that did what we all want to do since late 2018.</p>
<p>So i went ahead and copied everything like a good programmer, ran in a lot of errors on the way and finally made it so that you dont have to.</p>
<p>On the way I also upped our game of FAKE 5.</p>
<p>So here it is, a current (mid April 2020) summary of the dotnet core buildchain for F# projects.
<br></p>
<h2><a name="Moving-to-local-tools-and-pinning-dotnet-sdk-versions" class="anchor" href="#Moving-to-local-tools-and-pinning-dotnet-sdk-versions">Moving to local tools and pinning dotnet sdk versions</a></h2>
<p>This is a rather simple one. using a tool manifest for local dotnet cli tools, we can make sure that the much needed
<code>fake-cli</code> and <code>paket</code> tools are always present before even starting to build things.</p>
<p>We can add tool manifests with <code>dotnet new tool-manifest</code> in the project root. Adding and updating tools is now as simple as <code>dotnet tool install fake-cli</code> and <code>dotnet tool update fake-cli</code>(Note that in both cases there is no -g argument).</p>
<p>Here is an example of the tool manifest file (you can find it per default under ./.config if you use <code>dotnet new tool-manifest</code>):</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="JSON">{
"version": 1,
"isRoot": true,
"tools": {
  "fake-cli": {
    "version": "5.19.1",
    "commands": [
      "fake"
    ]
  },
  "paket": {
    "version": "5.243.0",
    "commands": [
      "paket"
    ]
  }
}
}
</code></pre></td></tr></table>
<p>By requiring certain .Net core SDK versions, we can further reduce potential errors during build:</p>
<p>executing <code>dotnet new global.json --sdk-version 3.1.200 --roll-forward minor</code> in the project root will create this global.json file:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="JSON">{
"sdk": {
    "version": "3.1.200",
    "rollForward": "minor"
    }
}
</code></pre></td></tr></table>
<p>wich will require at least .NET Core SDK 3.1.200 and allowing versions with a higher minor version number (e.g. 3.1.201 or 3.2.000)
<br></p>
<h2><a name="Upping-our-FAKE-5-game-using-Fake-BuildTask" class="anchor" href="#Upping-our-FAKE-5-game-using-Fake-BuildTask">Upping our FAKE 5 game using Fake.BuildTask</a></h2>
<p>FAKE already supports a preview F# language feature: in script paket dependencies. Thzis also means that there is no need for a build group in the paket.dependencies file, which in turn is a bit more clean.</p>
<p>just add this string on top of your buildscript:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#r</span> <span class="s">&quot;paket:</span>
<span class="s">nuget BlackFox.Fake.BuildTask</span>
<span class="s">nuget Fake.Core.Target</span>
<span class="s">nuget SomeMorePackages //&quot;</span> <span class="c">//the trailing // in the string are important so this works on Linux</span>
<span class="pp">#load</span> <span class="s">&quot;.fake/build.fsx/intellisense.fsx&quot;</span>
</code></pre></td>
</tr>
</table>
<p>The different build configurations of BioFSharp are a nightmare. There are some projects that can target only net45, net47, or both and also netstandard2.0.
So this results in basically 3 build processes, one for netfx, one for netstandard 2.0 and one for .NET core. This is especially confusing to realize in FAKE for two reasons:</p>
<p>Creating a dependency tree</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="s">&quot;Cleanup&quot;</span> 
  <span class="o">==&gt;</span> <span class="s">&quot;Build&quot;</span> 
  <span class="o">==&gt;</span> <span class="s">&quot;RunTestsBuild1&quot;</span>
  <span class="o">==&gt;</span> <span class="s">&quot;Build1&quot;</span> 
</code></pre></td>
</tr>
</table>
<p>Is the same as</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="s">&quot;Cleanup&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;Build&quot;</span>
<span class="s">&quot;Build&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;RunTestsBuild1&quot;</span>
<span class="s">&quot;RunTestsBuild1&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;Build1&quot;</span>
</code></pre></td>
</tr>
</table>
<p>Which means that you can't create alternate dependency trees starting from the "Build1" target without running everything else.</p>
<p>As a direct consequence of that, you have to create A LOT of dummy targets when you want to create different dependency trees and/or use the confusing <code>?=&gt;</code> operator for soft dependencies. This creates an sheer endless amount of strings on the end of the build.fsx file that is a nightmare to debug.</p>
<p>Enter <a href="https://github.com/vbfox/FoxSharp/blob/master/src/BlackFox.Fake.BuildTask/Readme.md">BlackFox.Fake.BuildTask</a>, a strongly typed Target alternative for FAKE.</p>
<p>Targets are now typed (so you have intellisense and autocompletion for them) and you have a much clearer structure enforce in your <code>build.fsx</code> as you have to write BuildTasks below the ones they depend on.
Soft dependencies can be created using the <code>IfNeeded</code> field of the BuildTask, which means that <em>When y is in the build chain, x has to be executed before it, if x is also in the chain</em> :</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="id">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 20)" onmouseover="showTip(event, 'fs13', 20)" class="m">BuildTask</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 21)" onmouseover="showTip(event, 'fs14', 21)" class="id">createEmpty</span> <span class="s">&quot;y&quot;</span> <span class="pn">[</span><span class="pn">]</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs15', 22)" onmouseover="showTip(event, 'fs15', 22)" class="id">z</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 23)" onmouseover="showTip(event, 'fs13', 23)" class="m">BuildTask</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 24)" onmouseover="showTip(event, 'fs14', 24)" class="id">createEmpty</span> <span class="s">&quot;z&quot;</span> <span class="pn">[</span><span onmouseout="hideTip(event, 'fs12', 25)" onmouseover="showTip(event, 'fs12', 25)" class="id">y</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 26)" onmouseover="showTip(event, 'fs16', 26)" class="id">IfNeeded</span><span class="pn">]</span>

<span class="c">// A task that needs z to be done and should run after y</span>
<span class="c">// if y is in the build chain</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 27)" onmouseover="showTip(event, 'fs17', 27)" class="id">build</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 28)" onmouseover="showTip(event, 'fs13', 28)" class="m">BuildTask</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs18', 29)" onmouseover="showTip(event, 'fs18', 29)" class="id">create</span> <span class="s">&quot;x&quot;</span> <span class="pn">[</span><span onmouseout="hideTip(event, 'fs12', 30)" onmouseover="showTip(event, 'fs12', 30)" class="id">y</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 31)" onmouseover="showTip(event, 'fs16', 31)" class="id">IfNeeded</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs15', 32)" onmouseover="showTip(event, 'fs15', 32)" class="id">z</span><span class="pn">]</span> <span class="pn">{</span>
    <span class="c">// ...</span>
    <span class="pn">(</span><span class="pn">)</span>
<span class="pn">}</span>
</code></pre></td>
</tr>
</table>
<p>Now we can create two buildchains:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 33)" onmouseover="showTip(event, 'fs19', 33)" class="id">buildChainA</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs13', 34)" onmouseover="showTip(event, 'fs13', 34)" class="m">BuildTask</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 35)" onmouseover="showTip(event, 'fs14', 35)" class="id">createEmpty</span> <span class="s">&quot;buildChainA&quot;</span> <span class="pn">[</span><span onmouseout="hideTip(event, 'fs12', 36)" onmouseover="showTip(event, 'fs12', 36)" class="id">y</span><span class="pn">;</span><span onmouseout="hideTip(event, 'fs17', 37)" onmouseover="showTip(event, 'fs17', 37)" class="id">build</span><span class="pn">]</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs20', 38)" onmouseover="showTip(event, 'fs20', 38)" class="id">buildChainB</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs13', 39)" onmouseover="showTip(event, 'fs13', 39)" class="m">BuildTask</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 40)" onmouseover="showTip(event, 'fs14', 40)" class="id">createEmpty</span> <span class="s">&quot;buildChainB&quot;</span> <span class="pn">[</span><span onmouseout="hideTip(event, 'fs17', 41)" onmouseover="showTip(event, 'fs17', 41)" class="id">build</span><span class="pn">]</span>
</code></pre></td>
</tr>
</table>
<p>Where in case of buildChainA the running order is:</p>
<ol>
<li><code>y</code> (Because it is in the buildchain, it needs to be run before <code>z</code>)</li>
<li><code>z</code> (It needs to be run befor build as a hard dependency)</li>
<li><code>build</code></li>
<li><code>buildChainA</code> (our dummy target for the chain)</li>
</ol>
<p>And for buildChainB:</p>
<ol>
<li><code>z</code> (It needs to be run before <code>build</code> as a hard dependency, note that <code>y</code> is not run as it is not in the chain)</li>
<li><code>build</code></li>
<li><code>buildChainB</code> (our dummy target for the chain)</li>
</ol>
<h2><a name="Moving-doc-generation-to-NET-Core" class="anchor" href="#Moving-doc-generation-to-NET-Core">Moving doc generation to .NET Core</a></h2>
<p>This is the big one. Just as back in the old days, we are able to generate docs using two <a href="">FSharp.Formatting</a> scripts (instead of the command line tool):
- <code>generate.fsx</code> which contains the logic how to build documentation
- <code>formatters.fsx</code> which contains custom formatters on how to format specific constructs (We use this for displaying Plotly Charts).</p>
<p>The BuildTask to run these scripts starts a fsi instance that executes these scripts:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs21', 42)" onmouseover="showTip(event, 'fs21', 42)" class="id">generateLocalDocumentation</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs13', 43)" onmouseover="showTip(event, 'fs13', 43)" class="m">BuildTask</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs18', 44)" onmouseover="showTip(event, 'fs18', 44)" class="id">create</span> <span class="s">&quot;generateLocalDocumentation&quot;</span> <span class="pn">[</span><span class="id">cleanDocs</span><span class="pn">]</span> <span class="pn">{</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 45)" onmouseover="showTip(event, 'fs22', 45)" class="id">result</span> <span class="o">=</span>
            <span class="id">DotNet</span><span class="pn">.</span><span class="id">exec</span>
                <span class="pn">(</span><span class="k">fun</span> <span class="id">p</span> <span class="k">-&gt;</span> <span class="pn">{</span> <span class="id">p</span> <span class="k">with</span> <span class="id">WorkingDirectory</span> <span class="o">=</span> <span class="k">__SOURCE_DIRECTORY__</span> <span class="id">@@</span> <span class="s">&quot;docsrc&quot;</span> <span class="id">@@</span> <span class="s">&quot;tools&quot;</span> <span class="pn">}</span><span class="pn">)</span>
                <span class="s">&quot;fsi&quot;</span>
                <span class="s">&quot;--define:REFERENCE --define:HELP --exec generate.fsx&quot;</span>

        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs23', 46)" onmouseover="showTip(event, 'fs23', 46)" class="fn">not</span> <span onmouseout="hideTip(event, 'fs22', 47)" onmouseover="showTip(event, 'fs22', 47)" class="id">result</span><span class="pn">.</span><span class="id">OK</span> <span class="k">then</span> 
            <span onmouseout="hideTip(event, 'fs24', 48)" onmouseover="showTip(event, 'fs24', 48)" class="fn">failwith</span> <span class="s">&quot;error generating docs&quot;</span> 
    <span class="pn">}</span>
</code></pre></td>
</tr>
</table>
<p>Here is a quick walkthrough:</p>
<h3><a name="header" class="anchor" href="#header"><code>formatters.fsx</code></a></h3>
<p>Here is the important part of <code>formatters.fsx</code>, that registers a transformation fot the <code>GenericChart.GenericChart</code> type</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Builds FSI evaluator that can render System.Image, F# Charts, series &amp; frames</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 49)" onmouseover="showTip(event, 'fs25', 49)" class="fn">createFsiEvaluator</span> <span onmouseout="hideTip(event, 'fs26', 50)" onmouseover="showTip(event, 'fs26', 50)" class="id">root</span> <span onmouseout="hideTip(event, 'fs27', 51)" onmouseover="showTip(event, 'fs27', 51)" class="id">output</span> <span class="o">=</span>

      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs28', 52)" onmouseover="showTip(event, 'fs28', 52)" class="fn">transformation</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs29', 53)" onmouseover="showTip(event, 'fs29', 53)" class="id">value</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs30', 54)" onmouseover="showTip(event, 'fs30', 54)" class="rt">obj</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs31', 55)" onmouseover="showTip(event, 'fs31', 55)" class="id">typ</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs32', 56)" onmouseover="showTip(event, 'fs32', 56)" class="rt">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 57)" onmouseover="showTip(event, 'fs33', 57)" class="id">Type</span><span class="pn">)</span> <span class="o">=</span>
            <span class="k">match</span> <span onmouseout="hideTip(event, 'fs29', 58)" onmouseover="showTip(event, 'fs29', 58)" class="id">value</span> <span class="k">with</span> 
            <span class="pn">|</span> <span class="o">:?</span> <span onmouseout="hideTip(event, 'fs34', 59)" onmouseover="showTip(event, 'fs34', 59)" class="m">GenericChart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 60)" onmouseover="showTip(event, 'fs35', 60)" class="id">GenericChart</span> <span class="k">as</span> <span onmouseout="hideTip(event, 'fs36', 61)" onmouseover="showTip(event, 'fs36', 61)" class="id">ch</span> <span class="k">-&gt;</span>
                <span class="c">// Just return the inline HTML for a Plotly chart        </span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 62)" onmouseover="showTip(event, 'fs37', 62)" class="id">html</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 63)" onmouseover="showTip(event, 'fs34', 63)" class="m">GenericChart</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs38', 64)" onmouseover="showTip(event, 'fs38', 64)" class="id">toChartHtmlWithSize</span> <span class="n">700</span> <span class="n">500</span> <span onmouseout="hideTip(event, 'fs36', 65)" onmouseover="showTip(event, 'fs36', 65)" class="id">ch</span>
                <span onmouseout="hideTip(event, 'fs39', 66)" onmouseover="showTip(event, 'fs39', 66)" class="uc">Some</span> <span class="pn">[</span><span onmouseout="hideTip(event, 'fs40', 67)" onmouseover="showTip(event, 'fs40', 67)" class="uc">InlineBlock</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs37', 68)" onmouseover="showTip(event, 'fs37', 68)" class="id">html</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs41', 69)" onmouseover="showTip(event, 'fs41', 69)" class="uc">None</span><span class="pn">)</span><span class="pn">]</span>

            <span class="pn">|</span> <span class="id">_</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs41', 70)" onmouseover="showTip(event, 'fs41', 70)" class="uc">None</span> 
    
      <span class="c">// Create FSI evaluator, register transformations &amp; return</span>
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 71)" onmouseover="showTip(event, 'fs42', 71)" class="id">fsiEvaluator</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs43', 72)" onmouseover="showTip(event, 'fs43', 72)" class="rt">FsiEvaluator</span><span class="pn">(</span><span class="pn">)</span>
      <span onmouseout="hideTip(event, 'fs42', 73)" onmouseover="showTip(event, 'fs42', 73)" class="fn">fsiEvaluator</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 74)" onmouseover="showTip(event, 'fs44', 74)" class="id">RegisterTransformation</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 75)" onmouseover="showTip(event, 'fs28', 75)" class="fn">transformation</span><span class="pn">)</span>
      <span onmouseout="hideTip(event, 'fs42', 76)" onmouseover="showTip(event, 'fs42', 76)" class="id">fsiEvaluator</span>
</code></pre></td>
</tr>
</table>
<h3><a name="header-1" class="anchor" href="#header-1"><code>generate.fsx</code></a></h3>
<p>This script is a little more complex. You define a lot of metadata about the project and then execute this function:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Build documentation from `fsx` and `md` files in `docsrc/content`</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 77)" onmouseover="showTip(event, 'fs45', 77)" class="fn">buildDocumentation</span> <span class="pn">(</span><span class="pn">)</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs46', 78)" onmouseover="showTip(event, 'fs46', 78)" class="fn">printfn</span> <span class="s">&quot;building docs...&quot;</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 79)" onmouseover="showTip(event, 'fs47', 79)" class="id">subdirs</span> <span class="o">=</span> <span class="pn">[</span> <span class="id">content</span><span class="pn">,</span> <span class="id">docTemplate</span> <span class="pn">]</span>

    <span class="c">//This line registers the formatter from formatters.fsx</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 80)" onmouseover="showTip(event, 'fs42', 80)" class="id">fsiEvaluator</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs25', 81)" onmouseover="showTip(event, 'fs25', 81)" class="fn">createFsiEvaluator</span> <span class="id">root</span> <span class="id">output</span>

    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs48', 82)" onmouseover="showTip(event, 'fs48', 82)" class="id">dir</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs49', 83)" onmouseover="showTip(event, 'fs49', 83)" class="id">template</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs47', 84)" onmouseover="showTip(event, 'fs47', 84)" class="id">subdirs</span> <span class="k">do</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs50', 85)" onmouseover="showTip(event, 'fs50', 85)" class="id">sub</span> <span class="o">=</span> <span class="s">&quot;.&quot;</span> <span class="c">// Everything goes into the same output directory here</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs51', 86)" onmouseover="showTip(event, 'fs51', 86)" class="fn">langSpecificPath</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs52', 87)" onmouseover="showTip(event, 'fs52', 87)" class="id">lang</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs53', 88)" onmouseover="showTip(event, 'fs53', 88)" class="id">path</span><span class="pn">:</span><span onmouseout="hideTip(event, 'fs54', 89)" onmouseover="showTip(event, 'fs54', 89)" class="rt">string</span><span class="pn">)</span> <span class="o">=</span>
            <span onmouseout="hideTip(event, 'fs53', 90)" onmouseover="showTip(event, 'fs53', 90)" class="fn">path</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 91)" onmouseover="showTip(event, 'fs55', 91)" class="id">Split</span><span class="pn">(</span><span class="pn">[|</span><span class="s">&#39;/&#39;</span><span class="pn">;</span> <span class="s">&#39;\\&#39;</span><span class="pn">|]</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs32', 92)" onmouseover="showTip(event, 'fs32', 92)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs56', 93)" onmouseover="showTip(event, 'fs56', 93)" class="vt">StringSplitOptions</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs57', 94)" onmouseover="showTip(event, 'fs57', 94)" class="id">RemoveEmptyEntries</span><span class="pn">)</span>
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs58', 95)" onmouseover="showTip(event, 'fs58', 95)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs59', 96)" onmouseover="showTip(event, 'fs59', 96)" class="id">exists</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs60', 97)" onmouseover="showTip(event, 'fs60', 97)" class="id">i</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs60', 98)" onmouseover="showTip(event, 'fs60', 98)" class="id">i</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs52', 99)" onmouseover="showTip(event, 'fs52', 99)" class="id">lang</span><span class="pn">)</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs61', 100)" onmouseover="showTip(event, 'fs61', 100)" class="id">layoutRoots</span> <span class="o">=</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs62', 101)" onmouseover="showTip(event, 'fs62', 101)" class="id">key</span> <span class="o">=</span> <span class="id">layoutRootsAll</span><span class="pn">.</span><span class="id">Keys</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs63', 102)" onmouseover="showTip(event, 'fs63', 102)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs64', 103)" onmouseover="showTip(event, 'fs64', 103)" class="id">tryFind</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs60', 104)" onmouseover="showTip(event, 'fs60', 104)" class="id">i</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs51', 105)" onmouseover="showTip(event, 'fs51', 105)" class="fn">langSpecificPath</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 106)" onmouseover="showTip(event, 'fs60', 106)" class="id">i</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs48', 107)" onmouseover="showTip(event, 'fs48', 107)" class="id">dir</span><span class="pn">)</span><span class="pn">)</span>
            <span class="k">match</span> <span onmouseout="hideTip(event, 'fs62', 108)" onmouseover="showTip(event, 'fs62', 108)" class="id">key</span> <span class="k">with</span>
            <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs39', 109)" onmouseover="showTip(event, 'fs39', 109)" class="uc">Some</span> <span onmouseout="hideTip(event, 'fs52', 110)" onmouseover="showTip(event, 'fs52', 110)" class="id">lang</span> <span class="k">-&gt;</span> <span class="id">layoutRootsAll</span><span class="pn">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs52', 111)" onmouseover="showTip(event, 'fs52', 111)" class="id">lang</span><span class="pn">]</span>
            <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs41', 112)" onmouseover="showTip(event, 'fs41', 112)" class="uc">None</span> <span class="k">-&gt;</span> <span class="id">layoutRootsAll</span><span class="pn">.</span><span class="pn">[</span><span class="s">&quot;en&quot;</span><span class="pn">]</span> <span class="c">// &quot;en&quot; is the default language</span>
        <span onmouseout="hideTip(event, 'fs65', 113)" onmouseover="showTip(event, 'fs65', 113)" class="rt">RazorLiterate</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs66', 114)" onmouseover="showTip(event, 'fs66', 114)" class="id">ProcessDirectory</span>
            <span class="pn">(</span> <span onmouseout="hideTip(event, 'fs48', 115)" onmouseover="showTip(event, 'fs48', 115)" class="id">dir</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs49', 116)" onmouseover="showTip(event, 'fs49', 116)" class="id">template</span><span class="pn">,</span> <span class="id">output</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs50', 117)" onmouseover="showTip(event, 'fs50', 117)" class="id">sub</span><span class="pn">,</span> <span class="id">replacements</span> <span class="o">=</span> <span class="pn">(</span><span class="s">&quot;root&quot;</span><span class="pn">,</span> <span class="id">root</span><span class="pn">)</span><span class="uc">::</span><span class="id">info</span><span class="pn">,</span>
            <span onmouseout="hideTip(event, 'fs61', 118)" onmouseover="showTip(event, 'fs61', 118)" class="id">layoutRoots</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs61', 119)" onmouseover="showTip(event, 'fs61', 119)" class="id">layoutRoots</span><span class="pn">,</span>
            <span class="id">generateAnchors</span> <span class="o">=</span> <span class="k">true</span><span class="pn">,</span>
            <span class="id">processRecursive</span> <span class="o">=</span> <span class="k">false</span><span class="pn">,</span>
            <span class="id">includeSource</span> <span class="o">=</span> <span class="k">true</span><span class="pn">,</span>
            <span onmouseout="hideTip(event, 'fs42', 120)" onmouseover="showTip(event, 'fs42', 120)" class="id">fsiEvaluator</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs42', 121)" onmouseover="showTip(event, 'fs42', 121)" class="id">fsiEvaluator</span>
            <span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>but most of this code was already present, just in build.fsx instead. Turns out migrating (including the points above) is a matter of half an hour if you know what to do, which you should after reading this post.</p>
<p>All of this however is most likely subject to change in the pretty near future, but we waited so long and I think the tools are now in a good state to migrate once again.</p>
<h3><a name="Wrapping-up-with-the-new-build-cmd-and-build-sh-commands" class="anchor" href="#Wrapping-up-with-the-new-build-cmd-and-build-sh-commands">Wrapping up with the new ./build.cmd and ./build.sh commands</a></h3>
<p>Now that we have local tools, we can restore them just like packages using <code>dotnet tool restore</code>. This ensures that the tools with the exact version are present before starting the build.
Here are the two main entry points for building our projects, using all of the above:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="batch">@echo off
cls

#restore local tools needed for the project (see tool-manifest)
dotnet tool restore

#restore packages as defined in paket.lock
dotnet paket restore

#execute the buildscript with optionally passing target parameters
dotnet fake build %*
</code></pre></td></tr></table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="bash">#!/usr/bin/env bash
set -eu
set -o pipefail

#restore local tools needed for the project (see tool-manifest)
dotnet tool restore

#restore packages as defined in paket.lock
dotnet paket restore

#execute the buildscript with optionally passing target parameters
dotnet fake build "$@"
</code></pre></td></tr></table>

<div class="tip" id="fs1">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="tip" id="fs2">namespace FSharp.Literate</div>
<div class="tip" id="fs3">namespace FSharp.Markdown</div>
<div class="tip" id="fs4">namespace FSharp.Plotly</div>
<div class="tip" id="fs5">namespace Fake</div>
<div class="tip" id="fs6">namespace Fake.Core</div>
<div class="tip" id="fs7">module TargetOperators<br /><br />from Fake.Core</div>
<div class="tip" id="fs8">namespace BlackFox</div>
<div class="tip" id="fs9">namespace BlackFox.Fake</div>
<div class="tip" id="fs10">namespace FSharp.Formatting</div>
<div class="tip" id="fs11">namespace FSharp.Formatting.Razor</div>
<div class="tip" id="fs12">val y : BuildTask.TaskInfo</div>
<div class="tip" id="fs13">module BuildTask<br /><br />from BlackFox.Fake</div>
<div class="tip" id="fs14">val createEmpty : name:string -&gt; dependencies:BuildTask.TaskInfo list -&gt; BuildTask.TaskInfo</div>
<div class="tip" id="fs15">val z : BuildTask.TaskInfo</div>
<div class="tip" id="fs16">property BuildTask.TaskInfo.IfNeeded: BuildTask.TaskInfo with get</div>
<div class="tip" id="fs17">val build : BuildTask.TaskInfo</div>
<div class="tip" id="fs18">val create : name:string -&gt; dependencies:BuildTask.TaskInfo list -&gt; BuildTask.TaskBuilder</div>
<div class="tip" id="fs19">val buildChainA : BuildTask.TaskInfo</div>
<div class="tip" id="fs20">val buildChainB : BuildTask.TaskInfo</div>
<div class="tip" id="fs21">val generateLocalDocumentation : BuildTask.TaskInfo</div>
<div class="tip" id="fs22">val result : obj</div>
<div class="tip" id="fs23">val not : value:bool -&gt; bool</div>
<div class="tip" id="fs24">val failwith : message:string -&gt; &#39;T</div>
<div class="tip" id="fs25">val createFsiEvaluator : root:&#39;a -&gt; output:&#39;b -&gt; FsiEvaluator<br /><em><br /><br />&#160;Builds FSI evaluator that can render System.Image, F# Charts, series &amp; frames</em></div>
<div class="tip" id="fs26">val root : &#39;a</div>
<div class="tip" id="fs27">val output : &#39;b</div>
<div class="tip" id="fs28">val transformation : (obj * System.Type -&gt; MarkdownParagraph list option)</div>
<div class="tip" id="fs29">val value : obj</div>
<div class="tip" id="fs30">type obj = System.Object</div>
<div class="tip" id="fs31">val typ : System.Type</div>
<div class="tip" id="fs32">namespace System</div>
<div class="tip" id="fs33">type Type =<br />&#160;&#160;inherit MemberInfo<br />&#160;&#160;member Assembly : Assembly<br />&#160;&#160;member AssemblyQualifiedName : string<br />&#160;&#160;member Attributes : TypeAttributes<br />&#160;&#160;member BaseType : Type<br />&#160;&#160;member ContainsGenericParameters : bool<br />&#160;&#160;member DeclaringMethod : MethodBase<br />&#160;&#160;member DeclaringType : Type<br />&#160;&#160;member Equals : o:obj -&gt; bool + 1 overload<br />&#160;&#160;member FindInterfaces : filter:TypeFilter * filterCriteria:obj -&gt; Type[]<br />&#160;&#160;member FindMembers : memberType:MemberTypes * bindingAttr:BindingFlags * filter:MemberFilter * filterCriteria:obj -&gt; MemberInfo[]<br />&#160;&#160;...</div>
<div class="tip" id="fs34">module GenericChart<br /><br />from FSharp.Plotly</div>
<div class="tip" id="fs35">type GenericChart =<br />&#160;&#160;| Chart of Trace * Layout * Config<br />&#160;&#160;| MultiChart of Trace list * Layout * Config</div>
<div class="tip" id="fs36">val ch : GenericChart.GenericChart</div>
<div class="tip" id="fs37">val html : string</div>
<div class="tip" id="fs38">val toChartHtmlWithSize : width:int -&gt; height:int -&gt; gChart:GenericChart.GenericChart -&gt; string</div>
<div class="tip" id="fs39">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs40">union case MarkdownParagraph.InlineBlock: code: string * range: Common.MarkdownRange option -&gt; MarkdownParagraph</div>
<div class="tip" id="fs41">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs42">val fsiEvaluator : FsiEvaluator</div>
<div class="tip" id="fs43">Multiple items<br />type FsiEvaluator =<br />&#160;&#160;interface IFsiEvaluator<br />&#160;&#160;new : ?options:string [] * ?fsiObj:obj -&gt; FsiEvaluator<br />&#160;&#160;member RegisterTransformation : f:(obj * Type -&gt; MarkdownParagraph list option) -&gt; unit<br />&#160;&#160;member EvaluationFailed : IEvent&lt;FsiEvaluationFailedInfo&gt;<br /><br />--------------------<br />new : ?options:string [] * ?fsiObj:obj -&gt; FsiEvaluator</div>
<div class="tip" id="fs44">member FsiEvaluator.RegisterTransformation : f:(obj * System.Type -&gt; MarkdownParagraph list option) -&gt; unit</div>
<div class="tip" id="fs45">val buildDocumentation : unit -&gt; unit</div>
<div class="tip" id="fs46">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T</div>
<div class="tip" id="fs47">val subdirs : (string * string) list</div>
<div class="tip" id="fs48">val dir : string</div>
<div class="tip" id="fs49">val template : string</div>
<div class="tip" id="fs50">val sub : string</div>
<div class="tip" id="fs51">val langSpecificPath : (string * string -&gt; bool)</div>
<div class="tip" id="fs52">val lang : string</div>
<div class="tip" id="fs53">val path : string</div>
<div class="tip" id="fs54">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />--------------------<br />type string = System.String</div>
<div class="tip" id="fs55">System.String.Split([&lt;System.ParamArray&gt;] separator: char []) : string []<br />System.String.Split(separator: string [], options: System.StringSplitOptions) : string []<br />System.String.Split(separator: string,?options: System.StringSplitOptions) : string []<br />System.String.Split(separator: char [], options: System.StringSplitOptions) : string []<br />System.String.Split(separator: char [], count: int) : string []<br />System.String.Split(separator: char,?options: System.StringSplitOptions) : string []<br />System.String.Split(separator: string [], count: int, options: System.StringSplitOptions) : string []<br />System.String.Split(separator: string, count: int,?options: System.StringSplitOptions) : string []<br />System.String.Split(separator: char [], count: int, options: System.StringSplitOptions) : string []<br />System.String.Split(separator: char, count: int,?options: System.StringSplitOptions) : string []</div>
<div class="tip" id="fs56">type StringSplitOptions =<br />&#160;&#160;| None = 0<br />&#160;&#160;| RemoveEmptyEntries = 1</div>
<div class="tip" id="fs57">field System.StringSplitOptions.RemoveEmptyEntries: System.StringSplitOptions = 1</div>
<div class="tip" id="fs58">module Array<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs59">val exists : predicate:(&#39;T -&gt; bool) -&gt; array:&#39;T [] -&gt; bool</div>
<div class="tip" id="fs60">val i : string</div>
<div class="tip" id="fs61">val layoutRoots : string list</div>
<div class="tip" id="fs62">val key : string option</div>
<div class="tip" id="fs63">Multiple items<br />module Seq<br /><br />from FSharp.Plotly<br /><br />--------------------<br />module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs64">val tryFind : predicate:(&#39;T -&gt; bool) -&gt; source:seq&lt;&#39;T&gt; -&gt; &#39;T option</div>
<div class="tip" id="fs65">type RazorLiterate =<br />&#160;&#160;private new : unit -&gt; RazorLiterate<br />&#160;&#160;static member ProcessDirectory : inputDirectory:string * ?templateFile:string * ?outputDirectory:string * ?format:OutputKind * ?formatAgent:CodeFormatAgent * ?prefix:string * ?compilerOptions:string * ?lineNumbers:bool * ?references:bool * ?fsiEvaluator:IFsiEvaluator * ?replacements:(string * string) list * ?includeSource:bool * ?layoutRoots:string list * ?generateAnchors:bool * ?assemblyReferences:string list * ?processRecursive:bool * ?customizeDocument:(ProcessingContext -&gt; LiterateDocument -&gt; LiterateDocument) -&gt; unit<br />&#160;&#160;static member ProcessDocument : doc:LiterateDocument * output:string * ?templateFile:string * ?format:OutputKind * ?prefix:string * ?lineNumbers:bool * ?includeSource:bool * ?generateAnchors:bool * ?replacements:(string * string) list * ?layoutRoots:string list * ?assemblyReferences:string list -&gt; unit<br />&#160;&#160;static member ProcessMarkdown : input:string * ?templateFile:string * ?output:string * ?format:OutputKind * ?formatAgent:CodeFormatAgent * ?prefix:string * ?compilerOptions:string * ?lineNumbers:bool * ?references:bool * ?replacements:(string * string) list * ?includeSource:bool * ?layoutRoots:string list * ?generateAnchors:bool * ?assemblyReferences:string list * ?customizeDocument:(ProcessingContext -&gt; LiterateDocument -&gt; LiterateDocument) -&gt; unit<br />&#160;&#160;static member ProcessScriptFile : input:string * ?templateFile:string * ?output:string * ?format:OutputKind * ?formatAgent:CodeFormatAgent * ?prefix:string * ?compilerOptions:string * ?lineNumbers:bool * ?references:bool * ?fsiEvaluator:IFsiEvaluator * ?replacements:(string * string) list * ?includeSource:bool * ?layoutRoots:string list * ?generateAnchors:bool * ?assemblyReferences:string list * ?customizeDocument:(ProcessingContext -&gt; LiterateDocument -&gt; LiterateDocument) -&gt; unit</div>
<div class="tip" id="fs66">static member RazorLiterate.ProcessDirectory : inputDirectory:string * ?templateFile:string * ?outputDirectory:string * ?format:OutputKind * ?formatAgent:FSharp.CodeFormat.CodeFormatAgent * ?prefix:string * ?compilerOptions:string * ?lineNumbers:bool * ?references:bool * ?fsiEvaluator:IFsiEvaluator * ?replacements:(string * string) list * ?includeSource:bool * ?layoutRoots:string list * ?generateAnchors:bool * ?assemblyReferences:string list * ?processRecursive:bool * ?customizeDocument:(ProcessingContext -&gt; LiterateDocument -&gt; LiterateDocument) -&gt; unit</div>

          </div>
      </div>
      <label for="sidebar-checkbox" class="sidebar-toggle"></label>
      <script>
          (function (document) {
              var toggle = document.querySelector('.sidebar-toggle');
              var sidebar = document.querySelector('#sidebar');
              var checkbox = document.querySelector('#sidebar-checkbox');

              document.addEventListener('click', function (e) {
                  var target = e.target;

                  if (!checkbox.checked ||
                      sidebar.contains(target) ||
                      (target === checkbox || target === toggle)) return;

                  checkbox.checked = false;
              }, false);
            })(document);
    </script>

  </body>
  </html >
